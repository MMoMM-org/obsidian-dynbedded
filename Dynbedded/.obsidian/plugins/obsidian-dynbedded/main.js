/*
THIS IS A GENERATED/BUNDLED FILE BY ESBUILD
if you want to view the source, please visit the github repository of this plugin
*/

var __defProp = Object.defineProperty;
var __getOwnPropDesc = Object.getOwnPropertyDescriptor;
var __getOwnPropNames = Object.getOwnPropertyNames;
var __hasOwnProp = Object.prototype.hasOwnProperty;
var __export = (target, all) => {
  for (var name in all)
    __defProp(target, name, { get: all[name], enumerable: true });
};
var __copyProps = (to, from, except, desc) => {
  if (from && typeof from === "object" || typeof from === "function") {
    for (let key of __getOwnPropNames(from))
      if (!__hasOwnProp.call(to, key) && key !== except)
        __defProp(to, key, { get: () => from[key], enumerable: !(desc = __getOwnPropDesc(from, key)) || desc.enumerable });
  }
  return to;
};
var __toCommonJS = (mod) => __copyProps(__defProp({}, "__esModule", { value: true }), mod);

// src/main.ts
var main_exports = {};
__export(main_exports, {
  default: () => Dynbedded
});
module.exports = __toCommonJS(main_exports);
var import_obsidian3 = require("obsidian");

// src/DynbeddedSettingTab.ts
var import_obsidian = require("obsidian");
var DEFAULT_SETTINGS = {
  debugLogging: false
};
var DynbeddedSettingTab = class extends import_obsidian.PluginSettingTab {
  constructor(app2, plugin) {
    super(app2, plugin);
    this.plugin = plugin;
  }
  display() {
    const { containerEl } = this;
    containerEl.empty();
    containerEl.createEl("h1", { text: this.plugin.pluginName });
    containerEl.createEl("h2", { text: this.plugin.pluginDescription });
    containerEl.createEl("b", { text: " Version: " + this.plugin.pluginVersion });
    containerEl.createEl("br", { text: "" });
    containerEl.createEl("br", { text: "" });
    containerEl.createEl("a", { text: "Created by " + this.plugin.pluginAuthor, href: this.plugin.pluginAuthorUrl });
    containerEl.createEl("br", { text: "" });
    containerEl.createEl("br", { text: "" });
    containerEl.createEl("a", { text: "Plugin Documentation", href: this.plugin.pluginDocumentationUrl });
    containerEl.createEl("br", { text: "" });
    containerEl.createEl("br", { text: "" });
    const coffeeDiv = containerEl.createDiv("coffee");
    coffeeDiv.addClass("ex-coffee-div");
    const coffeeLink = coffeeDiv.createEl("a", {
      href: "https://ko-fi.com/mmomm"
    });
    const coffeeImg = coffeeLink.createEl("img", {
      attr: {
        src: "https://cdn.ko-fi.com/cdn/kofi3.png?v=3"
      }
    });
    coffeeImg.height = 45;
    containerEl.createEl("h3", { text: "Developer Settings" });
    new import_obsidian.Setting(containerEl).setName("Enable Debug Logging").setDesc("If this is enabled, more things are printed to the console.").addToggle((toggle) => toggle.setValue(this.plugin.settings.debugLogging).onChange(async (value) => {
      this.plugin.log("Debug Logging", value);
      this.plugin.settings.debugLogging = value;
      await this.plugin.saveSettings();
    }));
  }
};

// src/DynbeddedProcessor.ts
var import_obsidian2 = require("obsidian");
var DynbeddedProcessor = class {
  constructor(app2, plugin) {
    this.plugin = plugin;
    this.app = app2;
  }
  async render(source, el, ctx) {
    const fileNameMatchPattern = /\[\[([^\]]{2}.*)\]\]/u;
    const fileNameMatch = fileNameMatchPattern.exec(source);
    this.plugin.log("FileNameMatch", fileNameMatch);
    if (!fileNameMatch) {
      Dynbedded.displayError(el, "Bad file link: " + source);
      return;
    }
    let fileName = fileNameMatch[1];
    const dynamicDateMatchPattern = /{{(.*)}}/;
    const dynamicDateMatch = dynamicDateMatchPattern.exec(fileName);
    this.plugin.log("DynamicDateMatch", dynamicDateMatch);
    if (dynamicDateMatch !== null) {
      const { dynamicDateFormat, dynamicDate } = this.getDynamicDate(dynamicDateMatch);
      if (!window.moment(window.moment.now(), dynamicDateFormat, true).isValid || dynamicDate === null) {
        Dynbedded.displayError(el, "Not a valid Moment.js Time format: " + dynamicDateFormat);
        return;
      }
      fileName = fileName.replace(dynamicDateMatchPattern, dynamicDate);
      this.plugin.log("DynamicFileName", fileName);
    }
    let header = "";
    if (fileName.contains("#")) {
      const __ret = this.splitFileName(fileName);
      header = __ret.header;
      fileName = __ret.fileName;
    }
    const matchingFile = this.app.metadataCache.getFirstLinkpathDest(fileName, "");
    this.plugin.log("MatchingFile", matchingFile);
    if (!matchingFile) {
      Dynbedded.displayError(el, "File link not found: [[" + fileName + "]]");
      return;
    }
    if (matchingFile.extension !== "md") {
      Dynbedded.displayError(el, "Bad file extension found, expected markdown: " + matchingFile);
      return;
    }
    let fileContents = "";
    if (header != "") {
      const headings = this.app.metadataCache.getFileCache(matchingFile).headings;
      if (headings === null || headings === void 0) {
        const errorMessage = 'Header "' + header + '" not found in [[' + fileName + "]]";
        Dynbedded.displayError(el, errorMessage);
        return;
      }
      this.plugin.log("Headings", headings);
      let position;
      for (let i = 0; i < headings.length; i++) {
        const heading = headings[i];
        this.plugin.log("Heading", heading);
        if (heading.heading == header) {
          if (i == headings.length - 1) {
            position = [heading.position.start.line, -1];
          } else {
            position = [heading.position.start.line, headings[i + 1].position.start.line];
          }
        }
      }
      if (position) {
        fileContents = await this.getHeaderSectionContent(matchingFile, position, fileContents);
      }
    } else {
      fileContents = await this.app.vault.cachedRead(matchingFile);
    }
    if (fileContents == "") {
      const errorMessage = 'Header "' + header + '" not found in [[' + fileName + "]]";
      Dynbedded.displayError(el, errorMessage);
      return;
    }
    this.plugin.log("File", fileContents);
    const container = el.createDiv({ cls: [Dynbedded.containerClass] });
    await import_obsidian2.MarkdownRenderer.renderMarkdown(fileContents, container, ctx.sourcePath, this.plugin);
  }
  getDynamicDate(dynamicDateMatch) {
    let dynamicDateFormat = dynamicDateMatch[1];
    let duration = window.moment.duration(0);
    this.plugin.log("DynamicDateFormat", dynamicDateFormat.includes("|"));
    if (dynamicDateFormat.includes("|")) {
      const offset = dynamicDateFormat.split("|")[1];
      this.plugin.log("Offset", offset);
      dynamicDateFormat = dynamicDateFormat.split("|")[0];
      this.plugin.log("dynamicDateMatch", dynamicDateFormat);
      if (/^-?\d+$/.test(offset)) {
        this.plugin.log("Number");
        duration = window.moment.duration(Number(offset), "days");
      } else {
        this.plugin.log("String");
        duration = window.moment.duration(offset);
      }
      this.plugin.log("Duration", duration);
    }
    const dynamicDate = window.moment().add(duration).format(dynamicDateFormat);
    this.plugin.log("DynamicDate", dynamicDate);
    return { dynamicDateFormat, dynamicDate };
  }
  async getHeaderSectionContent(matchingFile, position, fileContents) {
    let text = await this.app.vault.cachedRead(matchingFile);
    if (!text.endsWith("\n")) {
      text = text + "\n";
    }
    this.plugin.log("Position", position);
    this.plugin.log("Text", text);
    fileContents = text.split("\n").slice(position[0] + 1, position[1]).join("\n");
    this.plugin.log("Split", fileContents);
    return fileContents;
  }
  splitFileName(fileName) {
    const header = fileName.split("#")[1];
    fileName = fileName.split("#")[0];
    this.plugin.log("Header", header);
    return { header, fileName };
  }
};

// src/main.ts
var _Dynbedded = class extends import_obsidian3.Plugin {
  constructor() {
    super(...arguments);
    this.pluginName = this.manifest.name;
    this.pluginDescription = this.manifest.description;
    this.pluginVersion = this.manifest.version;
    this.pluginAuthor = this.manifest.author;
    this.pluginAuthorUrl = this.manifest.authorUrl;
    this.pluginDocumentationUrl = "https://github.com/MMoMM-org/obsidian-dynbedded";
    this.dynbeddedProcessor = new DynbeddedProcessor(app, this);
  }
  async onload() {
    await this.loadSettings();
    this.log("Loading Plugin");
    this.addSettingTab(new DynbeddedSettingTab(this.app, this));
    this.registerMarkdownCodeBlockProcessor(_Dynbedded.codeBlockKeyword, async (source, el, ctx) => {
      this.dynbeddedProcessor.render(source, el, ctx);
    });
  }
  onunload() {
    this.log("Unloading Plugin");
  }
  log(...args) {
    if (this.settings.debugLogging) {
      console.log(this.pluginName + "-Debug:", ...args);
    }
  }
  async loadSettings() {
    this.settings = Object.assign({}, DEFAULT_SETTINGS, await this.loadData());
    this.log("Settings loaded", this.settings);
  }
  async saveSettings() {
    await this.saveData(this.settings);
    this.log("Settings saved", this.settings);
  }
};
var Dynbedded = _Dynbedded;
Dynbedded.codeBlockKeyword = "dynbedded";
Dynbedded.containerClass = "dynbedded";
Dynbedded.errorClass = "dynbedded-error";
Dynbedded.displayError = (parent, text) => {
  console.log("Dynbedded-Error: ", text);
  parent.createEl("pre", { text: "Dynbedded: Error: " + text, cls: [_Dynbedded.containerClass, _Dynbedded.errorClass] });
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vLi4vLi4vLi4vc3JjL21haW4udHMiLCAiLi4vLi4vLi4vLi4vc3JjL0R5bmJlZGRlZFNldHRpbmdUYWIudHMiLCAiLi4vLi4vLi4vLi4vc3JjL0R5bmJlZGRlZFByb2Nlc3Nvci50cyJdLAogICJzb3VyY2VzQ29udGVudCI6IFsiaW1wb3J0IHtQbHVnaW59IGZyb20gJ29ic2lkaWFuJztcbmltcG9ydCB7REVGQVVMVF9TRVRUSU5HUywgRHluYmVkZGVkU2V0dGluZ3MsIER5bmJlZGRlZFNldHRpbmdUYWJ9IGZyb20gJy4vRHluYmVkZGVkU2V0dGluZ1RhYic7XG5pbXBvcnQge0R5bmJlZGRlZFByb2Nlc3Nvcn0gZnJvbSAnLi9EeW5iZWRkZWRQcm9jZXNzb3InO1xuXG50eXBlIExvZ1R5cGUgPSB0eXBlb2YgY29uc29sZS5sb2c7XG5cblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgRHluYmVkZGVkIGV4dGVuZHMgUGx1Z2luIHtcblx0c2V0dGluZ3M6IER5bmJlZGRlZFNldHRpbmdzO1xuXHRwbHVnaW5OYW1lID0gdGhpcy5tYW5pZmVzdC5uYW1lO1xuXHRwbHVnaW5EZXNjcmlwdGlvbiA9IHRoaXMubWFuaWZlc3QuZGVzY3JpcHRpb247XG5cdHBsdWdpblZlcnNpb24gPSB0aGlzLm1hbmlmZXN0LnZlcnNpb247XG5cdHBsdWdpbkF1dGhvciA9IHRoaXMubWFuaWZlc3QuYXV0aG9yO1xuXHRwbHVnaW5BdXRob3JVcmwgPSB0aGlzLm1hbmlmZXN0LmF1dGhvclVybDtcblx0cGx1Z2luRG9jdW1lbnRhdGlvblVybCA9ICdodHRwczovL2dpdGh1Yi5jb20vTU1vTU0tb3JnL29ic2lkaWFuLWR5bmJlZGRlZCc7XG5cblx0c3RhdGljIGNvZGVCbG9ja0tleXdvcmQgPSBcImR5bmJlZGRlZFwiO1xuXHRzdGF0aWMgY29udGFpbmVyQ2xhc3MgPSBcImR5bmJlZGRlZFwiO1xuXHRzdGF0aWMgZXJyb3JDbGFzcyA9IFwiZHluYmVkZGVkLWVycm9yXCI7XG5cblx0c3RhdGljIGRpc3BsYXlFcnJvciA9IChwYXJlbnQ6IEhUTUxFbGVtZW50LCB0ZXh0OiBzdHJpbmcpID0+IHtcblx0XHRjb25zb2xlLmxvZyhcIkR5bmJlZGRlZC1FcnJvcjogXCIsdGV4dClcblx0XHRwYXJlbnQuY3JlYXRlRWwoXCJwcmVcIiwgeyB0ZXh0OiBcIkR5bmJlZGRlZDogRXJyb3I6IFwiICsgdGV4dCwgY2xzOiBbRHluYmVkZGVkLmNvbnRhaW5lckNsYXNzLCBEeW5iZWRkZWQuZXJyb3JDbGFzc10gfSk7XG5cdH1cblxuXHRkeW5iZWRkZWRQcm9jZXNzb3IgPSBuZXcgRHluYmVkZGVkUHJvY2Vzc29yKGFwcCwgdGhpcyk7XG5cblx0YXN5bmMgb25sb2FkKCkge1xuXHRcdGF3YWl0IHRoaXMubG9hZFNldHRpbmdzKCk7XG5cdFx0dGhpcy5sb2coXCJMb2FkaW5nIFBsdWdpblwiKVxuXG5cdFx0Ly8gVGhpcyBhZGRzIGEgc2V0dGluZ3MgdGFiIHNvIHRoZSB1c2VyIGNhbiBjb25maWd1cmUgdmFyaW91cyBhc3BlY3RzIG9mIHRoZSBwbHVnaW5cblx0XHR0aGlzLmFkZFNldHRpbmdUYWIobmV3IER5bmJlZGRlZFNldHRpbmdUYWIodGhpcy5hcHAsIHRoaXMpKTtcblxuXHRcdC8vIFJlZ2lzdGVyaW5nIHRoZSBDb2RlQmxvY2tQcm9jZXNzb3Jcblx0XHR0aGlzLnJlZ2lzdGVyTWFya2Rvd25Db2RlQmxvY2tQcm9jZXNzb3IoRHluYmVkZGVkLmNvZGVCbG9ja0tleXdvcmQsIGFzeW5jIChzb3VyY2UsIGVsLCBjdHgpID0+IHt0aGlzLmR5bmJlZGRlZFByb2Nlc3Nvci5yZW5kZXIoc291cmNlLGVsLCBjdHgpfSk7XG5cdH1cblxuXHRvbnVubG9hZCgpIHtcblx0XHR0aGlzLmxvZyhcIlVubG9hZGluZyBQbHVnaW5cIilcblx0fVxuXG5cdGxvZyguLi5hcmdzOiBQYXJhbWV0ZXJzPExvZ1R5cGU+KSB7XG4gICAgICAgIGlmICh0aGlzLnNldHRpbmdzLmRlYnVnTG9nZ2luZykge1xuICAgICAgICAgICAgY29uc29sZS5sb2codGhpcy5wbHVnaW5OYW1lICsgXCItRGVidWc6XCIsIC4uLmFyZ3MpO1xuXHRcdH1cblx0fVxuXG5cdGFzeW5jIGxvYWRTZXR0aW5ncygpIHtcblx0XHR0aGlzLnNldHRpbmdzID0gT2JqZWN0LmFzc2lnbih7fSwgREVGQVVMVF9TRVRUSU5HUywgYXdhaXQgdGhpcy5sb2FkRGF0YSgpKTtcblx0XHR0aGlzLmxvZyhcIlNldHRpbmdzIGxvYWRlZFwiLHRoaXMuc2V0dGluZ3MpO1xuXHR9XG5cblx0YXN5bmMgc2F2ZVNldHRpbmdzKCkge1xuXHRcdGF3YWl0IHRoaXMuc2F2ZURhdGEodGhpcy5zZXR0aW5ncyk7XG5cdFx0dGhpcy5sb2coXCJTZXR0aW5ncyBzYXZlZFwiLHRoaXMuc2V0dGluZ3MpO1xuXHR9XG59XG5cblxuXG5cblxuXG4iLCAiaW1wb3J0IHsgQXBwLCBQbHVnaW5TZXR0aW5nVGFiLCBTZXR0aW5nIH0gZnJvbSAnb2JzaWRpYW4nO1xuaW1wb3J0IER5bmJlZGRlZCBmcm9tICcuL21haW4nO1xuXG5cbmV4cG9ydCBpbnRlcmZhY2UgRHluYmVkZGVkU2V0dGluZ3Mge1xuXHRkZWJ1Z0xvZ2dpbmc6IGJvb2xlYW5cbn1cblxuZXhwb3J0IGNvbnN0IERFRkFVTFRfU0VUVElOR1MgPSB7XG5cdGRlYnVnTG9nZ2luZzogZmFsc2Vcbn07XG5cblxuZXhwb3J0IGNsYXNzIER5bmJlZGRlZFNldHRpbmdUYWIgZXh0ZW5kcyBQbHVnaW5TZXR0aW5nVGFiIHtcblx0cHJpdmF0ZSBwbHVnaW46IER5bmJlZGRlZDtcblxuXHRjb25zdHJ1Y3RvcihhcHA6IEFwcCwgcGx1Z2luOiBEeW5iZWRkZWQpIHtcblx0XHRzdXBlcihhcHAsIHBsdWdpbik7XG5cdFx0dGhpcy5wbHVnaW4gPSBwbHVnaW47XG5cdH1cblxuXHRkaXNwbGF5KCk6IHZvaWQge1xuXHRcdGNvbnN0IHsgY29udGFpbmVyRWwgfSA9IHRoaXM7XG5cblx0XHRjb250YWluZXJFbC5lbXB0eSgpO1xuXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gxJywgeyB0ZXh0OiB0aGlzLnBsdWdpbi5wbHVnaW5OYW1lfSk7XG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2gyJywgeyB0ZXh0OiB0aGlzLnBsdWdpbi5wbHVnaW5EZXNjcmlwdGlvbn0pO1xuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdiJywgeyB0ZXh0OiAnIFZlcnNpb246ICcgKyB0aGlzLnBsdWdpbi5wbHVnaW5WZXJzaW9uIH0pO1xuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdicicsIHt0ZXh0OiAnJ30pXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2JyJywge3RleHQ6ICcnfSlcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnYScsIHt0ZXh0OiAnQ3JlYXRlZCBieSAnICsgdGhpcy5wbHVnaW4ucGx1Z2luQXV0aG9yLCBocmVmOiB0aGlzLnBsdWdpbi5wbHVnaW5BdXRob3JVcmx9KVxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdicicsIHt0ZXh0OiAnJ30pXG5cdFx0Y29udGFpbmVyRWwuY3JlYXRlRWwoJ2JyJywge3RleHQ6ICcnfSlcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnYScsIHt0ZXh0OiAnUGx1Z2luIERvY3VtZW50YXRpb24nLCBocmVmOiB0aGlzLnBsdWdpbi5wbHVnaW5Eb2N1bWVudGF0aW9uVXJsfSlcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnYnInLCB7dGV4dDogJyd9KVxuXHRcdGNvbnRhaW5lckVsLmNyZWF0ZUVsKCdicicsIHt0ZXh0OiAnJ30pXG5cdFx0Ly8gY29udGFpbmVyRWwuY3JlYXRlRWwoJ2gzJywgeyB0ZXh0OiAnQ29uZmlndXJhdGlvbjonfSk7XG5cdFx0Ly8gdGFrZSBmcm9tIGh0dHBzOi8vZ2l0aHViLmNvbS96c3ZpY3ppYW4vb2JzaWRpYW4tZXhjYWxpZHJhdy1wbHVnaW4vYmxvYi8wNDM2N2JkM2NkOTZhMTYyMTg1NDAxMTM5OTk1ZjdmYzQ4NDgxNDcwL3NyYy9zZXR0aW5ncy50cyNMMjYxXG5cdFx0Y29uc3QgY29mZmVlRGl2ID0gY29udGFpbmVyRWwuY3JlYXRlRGl2KFwiY29mZmVlXCIpO1xuXHRcdGNvZmZlZURpdi5hZGRDbGFzcyhcImV4LWNvZmZlZS1kaXZcIik7XG5cdFx0Y29uc3QgY29mZmVlTGluayA9IGNvZmZlZURpdi5jcmVhdGVFbChcImFcIiwge1xuXHRcdFx0aHJlZjogXCJodHRwczovL2tvLWZpLmNvbS9tbW9tbVwiLFxuXHRcdH0pO1xuXHRcdGNvbnN0IGNvZmZlZUltZyA9IGNvZmZlZUxpbmsuY3JlYXRlRWwoXCJpbWdcIiwge1xuXHRcdFx0YXR0cjoge1xuXHRcdFx0XHRzcmM6IFwiaHR0cHM6Ly9jZG4ua28tZmkuY29tL2Nkbi9rb2ZpMy5wbmc/dj0zXCIsXG5cdFx0XHR9LFxuXHRcdH0pO1xuXHRcdGNvZmZlZUltZy5oZWlnaHQgPSA0NTtcblxuLy8gTGVhdmUgdGhpcyBhbG9uZSFcblx0XHRjb250YWluZXJFbC5jcmVhdGVFbCgnaDMnLCB7IHRleHQ6ICdEZXZlbG9wZXIgU2V0dGluZ3MnIH0pO1xuXG5cdFx0bmV3IFNldHRpbmcoY29udGFpbmVyRWwpXG5cdFx0XHQuc2V0TmFtZSgnRW5hYmxlIERlYnVnIExvZ2dpbmcnKVxuXHRcdFx0LnNldERlc2MoJ0lmIHRoaXMgaXMgZW5hYmxlZCwgbW9yZSB0aGluZ3MgYXJlIHByaW50ZWQgdG8gdGhlIGNvbnNvbGUuJylcblx0XHRcdC5hZGRUb2dnbGUodG9nZ2xlID0+XG5cdFx0XHRcdHRvZ2dsZS5zZXRWYWx1ZSh0aGlzLnBsdWdpbi5zZXR0aW5ncy5kZWJ1Z0xvZ2dpbmcpLm9uQ2hhbmdlKGFzeW5jIHZhbHVlID0+IHtcblx0XHRcdFx0XHR0aGlzLnBsdWdpbi5sb2coXCJEZWJ1ZyBMb2dnaW5nXCIsIHZhbHVlKVxuXHRcdFx0XHRcdHRoaXMucGx1Z2luLnNldHRpbmdzLmRlYnVnTG9nZ2luZyA9IHZhbHVlO1xuXHRcdFx0XHRcdGF3YWl0IHRoaXMucGx1Z2luLnNhdmVTZXR0aW5ncygpO1xuXHRcdFx0XHR9KVxuXHRcdFx0KTtcblx0fVxufVxuXG5cbiIsICJpbXBvcnQge0FwcCwgTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCwgTWFya2Rvd25SZW5kZXJlciwgVEZpbGV9IGZyb20gXCJvYnNpZGlhblwiO1xuaW1wb3J0IER5bmJlZGRlZCBmcm9tIFwiLi9tYWluXCI7XG5cbmV4cG9ydCBjbGFzcyBEeW5iZWRkZWRQcm9jZXNzb3Ige1xuICAgIHByaXZhdGUgcGx1Z2luOiBEeW5iZWRkZWQ7XG4gICAgcHJpdmF0ZSBhcHA6IEFwcDtcblxuICAgIGNvbnN0cnVjdG9yKGFwcDogQXBwLCBwbHVnaW46IER5bmJlZGRlZCkge1xuICAgICAgICB0aGlzLnBsdWdpbiA9IHBsdWdpbjtcbiAgICAgICAgdGhpcy5hcHAgPSBhcHA7XG4gICAgfVxuXG4gICAgYXN5bmMgcmVuZGVyKHNvdXJjZTogc3RyaW5nLCBlbDogSFRNTEVsZW1lbnQsIGN0eDogTWFya2Rvd25Qb3N0UHJvY2Vzc29yQ29udGV4dCkge1xuXG4gICAgICAgIGNvbnN0IGZpbGVOYW1lTWF0Y2hQYXR0ZXJuID0gL1xcW1xcWyhbXlxcXV17Mn0uKilcXF1cXF0vdTtcbiAgICAgICAgY29uc3QgZmlsZU5hbWVNYXRjaCA9IGZpbGVOYW1lTWF0Y2hQYXR0ZXJuLmV4ZWMoc291cmNlKTtcblxuICAgICAgICB0aGlzLnBsdWdpbi5sb2coXCJGaWxlTmFtZU1hdGNoXCIsIGZpbGVOYW1lTWF0Y2gpO1xuICAgICAgICBpZiAoIWZpbGVOYW1lTWF0Y2gpIHtcbiAgICAgICAgICAgIER5bmJlZGRlZC5kaXNwbGF5RXJyb3IoZWwsIFwiQmFkIGZpbGUgbGluazogXCIgKyBzb3VyY2UpO1xuICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgbGV0IGZpbGVOYW1lID0gZmlsZU5hbWVNYXRjaFsxXTtcbiAgICAgICAgY29uc3QgZHluYW1pY0RhdGVNYXRjaFBhdHRlcm4gPSAve3soLiopfX0vO1xuICAgICAgICBjb25zdCBkeW5hbWljRGF0ZU1hdGNoID0gZHluYW1pY0RhdGVNYXRjaFBhdHRlcm4uZXhlYyhmaWxlTmFtZSk7XG4gICAgICAgIHRoaXMucGx1Z2luLmxvZyhcIkR5bmFtaWNEYXRlTWF0Y2hcIiwgZHluYW1pY0RhdGVNYXRjaCk7XG5cbiAgICAgICAgaWYgKGR5bmFtaWNEYXRlTWF0Y2ggIT09IG51bGwpIHtcbiAgICAgICAgICAgIGNvbnN0IHtkeW5hbWljRGF0ZUZvcm1hdCwgZHluYW1pY0RhdGV9ID0gdGhpcy5nZXREeW5hbWljRGF0ZShkeW5hbWljRGF0ZU1hdGNoKTtcbiAgICAgICAgICAgIC8vIFRvZG86IGZpZ3VyZSBvdXQgaG93IHRvIGhhbmRsZSB3cm9uZyBmb3JtYXRzIGNvcnJlY3RseS4uIG1vc3QgZm9ybWF0cyBhcmUgdmFsaWQgYnV0IGNyZWF0ZSB1bmRlc2lyZWQgcmVzdWx0cy4uLlxuICAgICAgICAgICAgaWYgKCF3aW5kb3cubW9tZW50KHdpbmRvdy5tb21lbnQubm93KCksIGR5bmFtaWNEYXRlRm9ybWF0LCB0cnVlKS5pc1ZhbGlkIHx8IGR5bmFtaWNEYXRlID09PSBudWxsKSB7XG4gICAgICAgICAgICAgICAgRHluYmVkZGVkLmRpc3BsYXlFcnJvcihlbCwgXCJOb3QgYSB2YWxpZCBNb21lbnQuanMgVGltZSBmb3JtYXQ6IFwiICsgZHluYW1pY0RhdGVGb3JtYXQpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIGZpbGVOYW1lID0gZmlsZU5hbWUucmVwbGFjZShkeW5hbWljRGF0ZU1hdGNoUGF0dGVybiwgZHluYW1pY0RhdGUpO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9nKFwiRHluYW1pY0ZpbGVOYW1lXCIsIGZpbGVOYW1lKTtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBoZWFkZXIgPSBcIlwiO1xuICAgICAgICBpZiAoZmlsZU5hbWUuY29udGFpbnMoXCIjXCIpKSB7XG4gICAgICAgICAgICBjb25zdCBfX3JldCA9IHRoaXMuc3BsaXRGaWxlTmFtZShmaWxlTmFtZSk7XG4gICAgICAgICAgICBoZWFkZXIgPSBfX3JldC5oZWFkZXI7XG4gICAgICAgICAgICBmaWxlTmFtZSA9IF9fcmV0LmZpbGVOYW1lO1xuICAgICAgICB9XG4gICAgICAgIGNvbnN0IG1hdGNoaW5nRmlsZSA9IHRoaXMuYXBwLm1ldGFkYXRhQ2FjaGUuZ2V0Rmlyc3RMaW5rcGF0aERlc3QoZmlsZU5hbWUsICcnKTtcbiAgICAgICAgdGhpcy5wbHVnaW4ubG9nKFwiTWF0Y2hpbmdGaWxlXCIsIG1hdGNoaW5nRmlsZSk7XG5cbiAgICAgICAgaWYgKCFtYXRjaGluZ0ZpbGUpIHtcbiAgICAgICAgICAgIER5bmJlZGRlZC5kaXNwbGF5RXJyb3IoZWwsIFwiRmlsZSBsaW5rIG5vdCBmb3VuZDogW1tcIiArIGZpbGVOYW1lICsgXCJdXVwiKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuICAgICAgICAvLyBUb2RvOiBjb3VsZCB0aGlzIGJlIG1vdmVkIHVwP1xuICAgICAgICBpZiAobWF0Y2hpbmdGaWxlLmV4dGVuc2lvbiAhPT0gXCJtZFwiKSB7XG4gICAgICAgICAgICBEeW5iZWRkZWQuZGlzcGxheUVycm9yKGVsLCBcIkJhZCBmaWxlIGV4dGVuc2lvbiBmb3VuZCwgZXhwZWN0ZWQgbWFya2Rvd246IFwiICsgbWF0Y2hpbmdGaWxlKTtcbiAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgfVxuXG4gICAgICAgIGxldCBmaWxlQ29udGVudHMgPSBcIlwiXG4gICAgICAgIGlmIChoZWFkZXIgIT0gXCJcIikge1xuICAgICAgICAgICAgLy8gQHRzLWlnbm9yZVxuICAgICAgICAgICAgY29uc3QgaGVhZGluZ3MgPSB0aGlzLmFwcC5tZXRhZGF0YUNhY2hlLmdldEZpbGVDYWNoZShtYXRjaGluZ0ZpbGUpLmhlYWRpbmdzO1xuICAgICAgICAgICAgaWYgKGhlYWRpbmdzID09PSBudWxsIHx8IGhlYWRpbmdzID09PSB1bmRlZmluZWQpIHtcbiAgICAgICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBcIkhlYWRlciBcXFwiXCIgKyBoZWFkZXIgKyBcIlxcXCIgbm90IGZvdW5kIGluIFtbXCIgKyBmaWxlTmFtZSArIFwiXV1cIjtcbiAgICAgICAgICAgICAgICBEeW5iZWRkZWQuZGlzcGxheUVycm9yKGVsLCBlcnJvck1lc3NhZ2UpO1xuICAgICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZyhcIkhlYWRpbmdzXCIsIGhlYWRpbmdzKTtcbiAgICAgICAgICAgIGxldCBwb3NpdGlvbjtcbiAgICAgICAgICAgIGZvciAobGV0IGkgPSAwOyBpIDwgaGVhZGluZ3MubGVuZ3RoOyBpKyspIHtcbiAgICAgICAgICAgICAgICBjb25zdCBoZWFkaW5nID0gaGVhZGluZ3NbaV07XG4gICAgICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9nKFwiSGVhZGluZ1wiLCBoZWFkaW5nKVxuICAgICAgICAgICAgICAgIGlmIChoZWFkaW5nLmhlYWRpbmcgPT0gaGVhZGVyKSB7XG4gICAgICAgICAgICAgICAgICAgIGlmIChpID09IGhlYWRpbmdzLmxlbmd0aCAtIDEpIHtcbiAgICAgICAgICAgICAgICAgICAgICAgIHBvc2l0aW9uID0gW2hlYWRpbmcucG9zaXRpb24uc3RhcnQubGluZSwgLTFdO1xuICAgICAgICAgICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgICAgICAgICAgcG9zaXRpb24gPSBbaGVhZGluZy5wb3NpdGlvbi5zdGFydC5saW5lLCBoZWFkaW5nc1tpICsgMV0ucG9zaXRpb24uc3RhcnQubGluZV07XG4gICAgICAgICAgICAgICAgICAgIH1cbiAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBpZiAocG9zaXRpb24pIHtcbiAgICAgICAgICAgICAgICBmaWxlQ29udGVudHMgPSBhd2FpdCB0aGlzLmdldEhlYWRlclNlY3Rpb25Db250ZW50KG1hdGNoaW5nRmlsZSwgcG9zaXRpb24sIGZpbGVDb250ZW50cyk7XG4gICAgICAgICAgICB9XG4gICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICBmaWxlQ29udGVudHMgPSBhd2FpdCB0aGlzLmFwcC52YXVsdC5jYWNoZWRSZWFkKG1hdGNoaW5nRmlsZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKGZpbGVDb250ZW50cyA9PSBcIlwiKSB7XG4gICAgICAgICAgICBjb25zdCBlcnJvck1lc3NhZ2UgPSBcIkhlYWRlciBcXFwiXCIgKyBoZWFkZXIgKyBcIlxcXCIgbm90IGZvdW5kIGluIFtbXCIgKyBmaWxlTmFtZSArIFwiXV1cIjtcbiAgICAgICAgICAgIER5bmJlZGRlZC5kaXNwbGF5RXJyb3IoZWwsIGVycm9yTWVzc2FnZSk7XG4gICAgICAgICAgICByZXR1cm47XG4gICAgICAgIH1cbiAgICAgICAgdGhpcy5wbHVnaW4ubG9nKFwiRmlsZVwiLCBmaWxlQ29udGVudHMpXG4gICAgICAgIGNvbnN0IGNvbnRhaW5lciA9IGVsLmNyZWF0ZURpdih7Y2xzOiBbRHluYmVkZGVkLmNvbnRhaW5lckNsYXNzXX0pO1xuICAgICAgICBhd2FpdCBNYXJrZG93blJlbmRlcmVyLnJlbmRlck1hcmtkb3duKGZpbGVDb250ZW50cywgY29udGFpbmVyLCBjdHguc291cmNlUGF0aCwgdGhpcy5wbHVnaW4pO1xuICAgIH1cblxuICAgIHByaXZhdGUgZ2V0RHluYW1pY0RhdGUoZHluYW1pY0RhdGVNYXRjaDogUmVnRXhwRXhlY0FycmF5KSB7XG4gICAgICAgIGxldCBkeW5hbWljRGF0ZUZvcm1hdCA9IGR5bmFtaWNEYXRlTWF0Y2hbMV07XG4gICAgICAgIGxldCBkdXJhdGlvbiA9IHdpbmRvdy5tb21lbnQuZHVyYXRpb24oMCk7XG4gICAgICAgIHRoaXMucGx1Z2luLmxvZyhcIkR5bmFtaWNEYXRlRm9ybWF0XCIsIGR5bmFtaWNEYXRlRm9ybWF0LmluY2x1ZGVzKFwifFwiKSlcbiAgICAgICAgaWYgKGR5bmFtaWNEYXRlRm9ybWF0LmluY2x1ZGVzKFwifFwiKSkge1xuICAgICAgICAgICAgY29uc3Qgb2Zmc2V0ID0gZHluYW1pY0RhdGVGb3JtYXQuc3BsaXQoXCJ8XCIpWzFdO1xuICAgICAgICAgICAgdGhpcy5wbHVnaW4ubG9nKFwiT2Zmc2V0XCIsIG9mZnNldCk7XG4gICAgICAgICAgICBkeW5hbWljRGF0ZUZvcm1hdCA9IGR5bmFtaWNEYXRlRm9ybWF0LnNwbGl0KFwifFwiKVswXTtcbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZyhcImR5bmFtaWNEYXRlTWF0Y2hcIiwgZHluYW1pY0RhdGVGb3JtYXQpXG4gICAgICAgICAgICBpZiAoL14tP1xcZCskLy50ZXN0KG9mZnNldCkpIHtcbiAgICAgICAgICAgICAgICB0aGlzLnBsdWdpbi5sb2coXCJOdW1iZXJcIik7XG4gICAgICAgICAgICAgICAgZHVyYXRpb24gPSB3aW5kb3cubW9tZW50LmR1cmF0aW9uKE51bWJlcihvZmZzZXQpLCBcImRheXNcIik7XG4gICAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZyhcIlN0cmluZ1wiKTtcbiAgICAgICAgICAgICAgICBkdXJhdGlvbiA9IHdpbmRvdy5tb21lbnQuZHVyYXRpb24ob2Zmc2V0KTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHRoaXMucGx1Z2luLmxvZyhcIkR1cmF0aW9uXCIsIGR1cmF0aW9uKTtcbiAgICAgICAgfVxuICAgICAgICBjb25zdCBkeW5hbWljRGF0ZSA9IHdpbmRvdy5tb21lbnQoKS5hZGQoZHVyYXRpb24pLmZvcm1hdChkeW5hbWljRGF0ZUZvcm1hdCk7XG4gICAgICAgIHRoaXMucGx1Z2luLmxvZyhcIkR5bmFtaWNEYXRlXCIsIGR5bmFtaWNEYXRlKTtcbiAgICAgICAgcmV0dXJuIHtkeW5hbWljRGF0ZUZvcm1hdCwgZHluYW1pY0RhdGV9O1xuICAgIH1cblxuICAgIHByaXZhdGUgYXN5bmMgZ2V0SGVhZGVyU2VjdGlvbkNvbnRlbnQobWF0Y2hpbmdGaWxlOiBURmlsZSwgcG9zaXRpb246IG51bWJlcltdLCBmaWxlQ29udGVudHM6IHN0cmluZykge1xuICAgICAgICBsZXQgdGV4dCA9IGF3YWl0IHRoaXMuYXBwLnZhdWx0LmNhY2hlZFJlYWQobWF0Y2hpbmdGaWxlKVxuICAgICAgICBpZiAoIXRleHQuZW5kc1dpdGgoXCJcXG5cIikpIHtcbiAgICAgICAgICAgIHRleHQgPSB0ZXh0ICsgXCJcXG5cIlxuICAgICAgICB9XG4gICAgICAgIHRoaXMucGx1Z2luLmxvZyhcIlBvc2l0aW9uXCIsIHBvc2l0aW9uKTtcbiAgICAgICAgdGhpcy5wbHVnaW4ubG9nKFwiVGV4dFwiLCB0ZXh0KTtcbiAgICAgICAgZmlsZUNvbnRlbnRzID0gdGV4dC5zcGxpdChcIlxcblwiKS5zbGljZShwb3NpdGlvblswXSArIDEsIHBvc2l0aW9uWzFdKS5qb2luKFwiXFxuXCIpO1xuICAgICAgICB0aGlzLnBsdWdpbi5sb2coXCJTcGxpdFwiLCBmaWxlQ29udGVudHMpXG4gICAgICAgIHJldHVybiBmaWxlQ29udGVudHM7XG4gICAgfVxuXG4gICBwcml2YXRlIHNwbGl0RmlsZU5hbWUoZmlsZU5hbWU6IHN0cmluZykge1xuICAgICAgICBjb25zdCBoZWFkZXIgPSBmaWxlTmFtZS5zcGxpdChcIiNcIilbMV07XG4gICAgICAgIGZpbGVOYW1lID0gZmlsZU5hbWUuc3BsaXQoXCIjXCIpWzBdO1xuICAgICAgICB0aGlzLnBsdWdpbi5sb2coXCJIZWFkZXJcIiwgaGVhZGVyKTtcbiAgICAgICAgcmV0dXJuIHtoZWFkZXIsIGZpbGVOYW1lfTtcbiAgICB9XG59XG5cbiJdLAogICJtYXBwaW5ncyI6ICI7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7Ozs7OztBQUFBO0FBQUE7QUFBQTtBQUFBO0FBQUE7QUFBQSx1QkFBcUI7OztBQ0FyQixzQkFBK0M7QUFReEMsSUFBTSxtQkFBbUI7QUFBQSxFQUMvQixjQUFjO0FBQ2Y7QUFHTyxJQUFNLHNCQUFOLGNBQWtDLGlDQUFpQjtBQUFBLEVBR3pE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
